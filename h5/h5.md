# h5 - Nimekäs

*21.9.2025*

## a) Nimi

**Tehtävänanto**:  Laita julkinen nimi osoittamaan omaan koneeseesi.[^1]

**17:30**: Aloitin harjoituksen tekemisen luomalla käyttäjän Namecheap-palveluun, tarkoituksenani vuokrata osoitenimi. 

Tunnuksen luonnin jälkeen menin suoraan asiaan ja etsin itselleni sopivan osoitteen. Päädyin GitHub-tunnukseni mukaan nimettyyn osoitteeseen: **janikave.com**.

![Add file: Upload](h5_nc_domain.png)

**17:45**: Viimeistelin haluamani osoitteen vuokraamisen.

![Add file: Upload](h5_nc_domain2.png)

**17:52**: Avasin Linuxin ja vuokraamani virtuaalipalvelimen SSH-yhteydellä.

**17:57**: Aloitin nimipohjaisen virtuaalipalvelimen luonnin (en ollut tehnyt tätä aiemmalla viikolla).

**18:00**: Loin osoitteelleni konfigurointitiedoston Apachen sites-available -alihakemistoon **(/etc/apache2/sites-available/)**.

**18:15**: Rupesin luomaan kotikansiooni konfigurointitiedostooni laittamaa polkua. 

```bash
mkdir -p /home/jani/public-sites/janikave.com
```

![Add file: Upload](h5_tree.png)

**18:20**: Loin nano-editorilla osoite-hakemistoon index.html-tiedoston, ja kopioin sinne validin HTML-pohjan[^2], mitä vähän muokkasin (tällä hetkellä tarpeettomat osat pois).

![Add file: Upload](h5_index.png)

**18:35**: Lisäsin osoitteen apachen sites-enabled hakemistoon komennolla:

```bash
sudo a2ensite janikave.com
```

Tämän jälkeen ajoin seuraavan komennon käynnistääkseni Apachen uudelleen: 

```bash
sudo systemctl reload apache2
```

![Add file: Upload](h5_se.png)

**18:45**: kokeilin curl-komennolla katsoa, löytääkö se osoitteeni ja sen sisällön: 

![Add file: Upload](h5_curl.png)

Hämmentyneenä curlin näyttämästä lopputuloksesta, päätin kokeilla selaimella osoitetta. Osoite palautti vain seuraavan virheilmoituksen: 
```
Content of the page cannot be displayed
```

**18:50**: Aloin selvittelemään, missä mättää. Ensiksi menin osoitteen vuokraavan palvelun (NameCheap) sivuille, ja katsoin mikä tilanne. Tässä huomasin vuokraamani osoitteen tilan kohdalla olevan Alert-huomion.
Selviteltyäni Alert-ikonin syytä, löysin, etten ollut verifikoinut sähköpostiosoitettani. Tämän tehtyäni NameCheap ilmoitti, että osoitteen pitäisi toimia 24-48 tunnin sisällä. 

**19:05**: Kokeilin uudestaan sivun katsomista, mutta ongelma pysyi samana. Yritin korjata ongelmaa ottamalla konfigurointitiedostosta virtuaalipalvelimen ip-osoitteen pois.

![Add file: Upload](h5_sa_janikave2.png)

Ongelma pysyi samana.

**19:30** rupesin katselemaan kotihakemistoni oikeuksia. Lisäsin others-ryhmälle x-oikeudet kotihakemistooni. 

![Add file: Upload](h5_chmod.png) 

Ongelma pysyi edelleen samana. 

**20:10** Päätin kokeilla oletussivun (000-default.conf) poistamista sites-enabled -hakemistosta. 
```bash
sudo a2dissite 000-default.conf
```

Tämän jälkeen käynnistin Apachen uudelleen ja kokeilin uudestaan, mutta curl näytti edelleen samaa virheilmoitusta kuin sivukin: 

![Add file: Upload](h5_curl2.png)

**20:30**: Otin tauon.

**21:00**: Jatkoin tehtävää ja päätin luettuani muutamia artikkeleita[^3] ja ohjeita[^4] vaihtaa omasta kotikansiosta var-hakemiston www-alahakemistoon[^5]. 

```bash
mv /home/jani/public-sites/janikave.com/index.html /var/www/janikave.com
```

Tämäkään ei ratkonut ongelmaa. Yritin myös muuttaa uuden kansion käyttö- ja lukuoikeuksia (varmistaa, että apachella on pääsy kansioon), mutta ongelma pysyi samana. 

**21:40**-**22:10** *Tauko*

**22:10**: Rupesin taas katselemaan ongelman juurta, tällä kertaa NameCheapin sivuilta[^6]. Täältä myös löytyi ratkaisu ongelmaan: Avdanced DNS-osion Host Records -kohdassa puuttui A-tietue! Tein sitten sellaisen ja sivusto rupesikin toimimaan. 

![Add file: Upload](h5_site.png)

Curl-komento onnistui, ehkä? ilman www:tä curl toimii mutta sen kanssa ei. 

![Add file: Upload](h5_curl_site.png)

![Add file: Upload](h5_curl_www.png)

**22:40**: Olin saanut tämän osan päätökseen.

*Tähän osioon käytetty aika (taukoineen)*: **17:30-22:40**...

## b) Alidomain

**Tehtävänanto**: Tee kaksi uutta alidomainia, jotka osoittava omaan koneeseesi.[^1]

**23:05**: Jatkoin NameCheapin sivulla konfiguroimalla tietueita. Hyödynsin NameCheapin omaa artikkelia alidomainien luonnissa[^6]. 

Ensiksi kokeilin www-alidomainin luontia seuraavilla asetuksilla: 
- **Type**: CNAME-Record
- **Host**: www
- **Value**: janikave.com
- **TTL**: Automatic

Alidomainin lisäämisen jälkeen odotin muutaman minuutin ja kokeilin sitten sivun toimivuutta curl-komennolla ja FireFox-selaimessa.

![Add file: Upload](h5_curl_www_work.png)

![Add file: Upload](h5_site_www.png)

Nämä toimivat siis halutunlaisesti. 

**23:20**: Kokeilin seuraavan alidomainin lisäämistä. 

Tällä kertaa kokeilin uuden A-tietueen lisäämistä: 
- **Type**: A-Record
- **Host**: info
- **Value**: 94.237.114.152
- **TTL**: 1 minute

Odottelin taas muutaman minuutin ja kokeilin toimivuutta.

![Add file: Upload](h5_curl_info.png)

![Add file: Upload](h5_site_info.png)

Myös tämän alidomainin lisäys toimi halutunlaisesti. 

*Tähän osioon käytetty aika*: **23:05-23:30**

## c) Host ja Dig -komennot

**Tehtävänanto**: Tutki jonkin nimen DNS-tietoja 'host' ja 'dig' -komennoilla. Käytä kumpaakin komentoa kaikkiin nimiin ja vertaa tuloksia. [^1]

Saadakseni dig ja host -komennot käyttöön, piti minun ladata dnsutils-paketti. 

```bash
sudo apt-get install dnsutils
```

### Host

**23:35** Käytin man ja tldr -komentoja selvittämään **host**-komennon toimimista. 

Ajoin normaalin host-komennon jokaiselle domainille, mitä olin NameCheapin avulla tehnyt: 

```bash
host janikave.com
host www.janikave.com
host info.janikave.com
```

Komentojen tulokset: 

![Add file: Upload](h5_host.png)

Peruskomento näyttää siis osoitenimeä isännöivän ip-osoitteen ja mailin isännöitsijän. Se myös näyttää mikäli osoite on alias jollekin toiselle osoitteelle. 

Hain myös Tero Karvisen ja HSL:n kotisivujen tietoja host-komennolla: 

![Add file: Upload](h5_host_tk_hsl.png)

Tero Karvisen sivuilla oli samanlaiset tiedot näytöllä, mutta HSL:llä oli useampi IP-osoite käytössä.

### Dig 

**00:00**: Käytin man ja tldr -komentoja ja selvittämään dig-komennon toimintaa.

Käytin omiin osoitteisiini yksinkertaisesti komentoa 
```bash
dig janikave.com
dig www.janikave.com
dig info.janikave.com
```

WWW-alidomainilla dig näytti tälläistä tulosta: 

![Add file: Upload](h5_dig_janikave.png)

Googlailin hieman ymmärtääkseni komentojen palautuksesta jotain[^7]. Komento siis palauttaa lähetetyn kyselyn tiedot, itse kyselystä ja sen vastauksesta, sekä metadataa kyselyn suorittamisesta.

Vastaavasti dig +short -komento näyttää vain sivua isännöivän IP-osoitteen. 

![Add file: Upload](h5_dig_short.png)

Kokeilen Tero Karvisen ja HSL:n sivujen suhteen komentoa:
```bash
dig +noall +answer terokarvinen.com
dig +noall +answer hsl.fi
```

Tämä komento palauttaa vain kyselystä Answer-osion. 

![Add file: Upload](h5_dig_answer.png)


*Tähän osioon käytetty aika*: **00:00-00:30**

**Lisäys**: Päivä tehtävän palauttamisen jälkeen siirsin index.html-tiedoston takaisin kotihakemistooni, kuten oli alunperin tarkoituskin. Sivu toimi tämän jälkeen normaalisti. 

## Itsereflektio

Tähän tehtävään meni jotenkin tuhottoman paljon aikaa. Tein aluksi nimipohjaista virtuaalipalvelinta aika lailla ulkomuistista, ja ongelmien pysyessä rupesin lyömään päätä seinään, perusasioiden tarkistamisen sijasta (tässä tilanteessa vuokratun osoitteen asetukset NameCheapin sivuilla). Ensimmäinen osio vei valtaosan ajasta, kun taas seuraavat osiot menivät rutkasti nopeammin. Näki kyllä, ettei tiivistelmiä ollut tehtävänä tällä kertaa, kun tiedonhaku tuli aloitettua vasta keskellä harjoitusta. Pitää siis aktiivisesti aloittaa tiedonhaku jo harjoituksen alussa jatkossa.

## Lähteet

Käytin tässä harjoituksessa seuraavia lähteitä: 

[^1]: Karvinen, Tero. h5 - Nimekäs. Kurssin opetusmateriaali. Luettavissa: https://terokarvinen.com/linux-palvelimet/#h5-nimekas

[^2]: Lazaris, Louis: 2023-09-12. HTML5 Template: A Basic Boilerplate for Any Project. https://www.sitepoint.com/a-basic-html5-template/

[^3]: Veeble Hosting: 2025-04-08. How to setup Apache Web Server to host a website in Linux. https://www.veeble.com/kb/how-to-setup-apache-to-host-a-website-in-linux/

[^4]: Ask Ubuntu: 2014-02-04. Problems with the /var/www folder. https://askubuntu.com/questions/416399/problems-with-the-var-www-folder

[^5]: Geeks for Geeks: 2025-07-24. How to Move File in Linux | mv Command. https://www.geeksforgeeks.org/linux-unix/mv-command-linux-examples/

[^6]: NameCheap: 2024-06-25. My website is down: what to do? https://www.namecheap.com/support/knowledgebase/article.aspx/9568/2194/my-website-is-down-what-to-do/

[^6]: NameCheap: 2025-04-14. How do I set up host records for a domain? https://www.namecheap.com/support/knowledgebase/article.aspx/434/2237/how-do-i-set-up-host-records-for-a-domain/

[^7]: Phoenixnap.com: 2024-05-23. dig Command in Linux with Examples. https://phoenixnap.com/kb/linux-dig-command-examples



